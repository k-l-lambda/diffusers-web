
import sys
import os
import re
import flask
import json

import env



app = flask.Flask(__name__, static_url_path = '', static_folder = './static')


DIST_DIR = './dist'


@app.route('/bundles/<path:filename>')
def bundle(filename):
	if re.match(r'.*\.bundle\.js$', filename):
		return flask.send_from_directory(DIST_DIR, filename)

	flask.abort(404, 'Invalid request path.')


pageRouters = {
	'/':				'index.html',
}
for path in pageRouters:
	def getHandler(filename):
		return lambda: flask.send_from_directory(DIST_DIR, filename)

	app.route(path, endpoint = 'handler' + path)(getHandler(pageRouters[path]))


@app.route('/paint-by-text', methods=['GET'])
def paintByText():
	prompt = flask.request.args.get('prompt')
	multi = int(flask.request.args.get('multi', 1))
	print('paint by text:', prompt, multi)

	imgurl = 'data:image/png;base64,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'

	result = {
		'prompt': prompt,
		'images': [imgurl],
	}

	return flask.Response(json.dumps(result), mimetype = 'application/json')


def main(argv):
	global model_name
	model_name = argv[1] if len(argv) > 1 else os.environ.get('MODEL_NAME')

	try:
		app.run(port = int(os.getenv('HTTP_PORT')), host = os.getenv('HTTP_HOST'), threaded = False)
	except:
		print('server interrupted:', sys.exc_info())



if __name__ == "__main__":
	main(sys.argv)
